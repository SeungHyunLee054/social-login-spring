<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>OAuth Callback</title>
</head>
<body>
<h2>ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ì…ë‹ˆë‹¤...</h2>
<script>
    // URLì—ì„œ code íŒŒë¼ë¯¸í„° ì¶”ì¶œ
    const urlParams = new URLSearchParams(window.location.search);
    const code = urlParams.get('code');

    if (code) {
        const signupDto = {
            provider: "kakao",
            authorizationCode: code
        };

        fetch("/oauth/signin", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(signupDto)
        })
            .then(res => res.text())
            .then(token => {
                document.body.innerHTML = `
          <h2>ë¡œê·¸ì¸ ì„±ê³µ</h2>
          <p>JWT í† í°:</p>
          <pre>${token}</pre>
        `;
            })
            .catch(err => {
                console.error(err);
                document.body.innerHTML = "<h2>ë¡œê·¸ì¸ ì‹¤íŒ¨ ğŸ˜¢</h2>";
            });
    } else {
        document.body.innerHTML = "<h2>Authorization Code ì—†ìŒ</h2>";
    }
</script>
</body>
</html>
